<?xml version="1.0"?>
<component name="org.nuxeo.labs.threed.obj.commandline">

     <extension target="org.nuxeo.ecm.platform.commandline.executor.service.CommandLineExecutorComponent" point="command">

         <command name="image2glbResource" enabled="true">
             <commandLine>convert</commandLine>
             <parameterString>-define registry:temporary-path=#{nuxeo.tmp.dir} -quiet #{sourceFilePath}[0] -flatten -strip -sampling-factor 4:2:0 -quality 85 jpg:#{targetFilePath}</parameterString>
             <winParameterString>-define registry:temporary-path=#{nuxeo.tmp.dir} -quiet #{sourceFilePath}[0] -flatten -strip -sampling-factor 4:2:0 -quality 85 jpg:#{targetFilePath}</winParameterString>
             <installationDirective>You need to install ImageMagick.</installationDirective>
         </command>

         <command name="obj2gltf" enabled="true">
            <commandLine>obj2gltf</commandLine>
            <winCommand>obj2gltf.cmd</winCommand>
            <testParameterString>-h</testParameterString>
            <parameterString>-b -i #{sourceFilePath} -o #{targetFilePath}</parameterString>
            <winParameterString>-b -i #{sourceFilePath} -o #{targetFilePath}</winParameterString>
            <installationDirective>You need to install https://github.com/CesiumGS/obj2gltf</installationDirective>
        </command>

         <command name="gltf2glb" enabled="true">
             <commandLine>gltf-pipeline</commandLine>
             <winCommand>gltf-pipeline.cmd</winCommand>
             <testParameterString>-h</testParameterString>
             <parameterString>-i #{sourceFilePath} -o #{targetFilePath} -d --draco.compressionLevel 7  --draco.quantizePositionBits 16 --draco.quantizeTexcoordBits 16 --draco.quantizeNormalBits 16</parameterString>
             <winParameterString>-i #{sourceFilePath} -o #{targetFilePath} -d --draco.compressionLevel 7  --draco.quantizePositionBits 16 --draco.quantizeTexcoordBits 16 --draco.quantizeNormalBits 16</winParameterString>
             <installationDirective>You need to install https://github.com/CesiumGS/gltf-pipeline</installationDirective>
         </command>

     </extension>

</component>